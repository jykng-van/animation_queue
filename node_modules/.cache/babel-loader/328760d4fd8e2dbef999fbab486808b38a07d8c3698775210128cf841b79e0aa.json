{"ast":null,"code":"import anime from'animejs';export default class Animation{//if the animation is done or not\nconstructor(){this.animatedRegions={};//scroll regions for animations\nthis.specialAnimations={};//collections of special animations: SVG attribute changes and the Pie Reveal animation\nthis.observer=null;//observer class for the scrolling triggers\nthis.animatedElements={};//elements (by selectors) and their scripted animations\nthis.initializedElements=[];//elements that were changed on Start\nthis.animationStep=0;//current animation step number\nthis.animationDelay=0;//culumative animation delay with each step\nthis.animationDone=false;console.log('Animation class constructed');}async Prepare(animations,initialState,container){let scrollarea=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;//get regions\nif(this.observer!=null){this.observer.disconnect();}this.animatedRegions={};animations.forEach(r=>{let start_obj={animationStep:0,animationDelay:0};if(r.trigger){console.log(r);this.animatedRegions[r.trigger]=Object.assign(start_obj,r);}else{this.animatedRegions.default=Object.assign(start_obj,r);}});console.log('prepareAnimation!!');console.log(this.animatedRegions);await this.Start(initialState);let target=document.querySelector(scrollarea);console.log(target);console.log(this.animatedRegions.default!==null,Object.entries(this.animatedRegions).length===1);if(this.animatedRegions.default!==null&&Object.entries(this.animatedRegions).length===1){console.log('default animation!');this.Animate('default');}else{console.log('Not default',Object.keys(this.animatedRegions));let opt={root:document.querySelector(container),threshold:Array.from({length:21},(x,i)=>i/20)};let regions=[];this.observer=new IntersectionObserver(entries=>{entries.forEach(e=>{if(e.isIntersecting){let target=regions.find(n=>n.el===e.target);if(!target.triggered&&e.intersectionRatio>=target.threshold){console.log('observer entry',e.intersectionRatio,target.selector,target.threshold);console.log(\"\".concat(target.selector,\" threshold start animation!\"));this.Animate(target.selector);target.triggered=true;}}});},opt);Object.entries(this.animatedRegions).forEach(_ref=>{let[k,val]=_ref;console.log(k,val);if(k!=='default'){let entry=document.querySelector(k);regions.push({el:entry,selector:k,threshold:val.threshold,triggered:false});this.observer.observe(entry);}});console.log(this.animatedRegions);console.log(regions);}}async Start(initialState){this.animationDone=false;this.clearStyles();//clear the styles and restart animatedElements\nconsole.log('Start!');console.log(initialState);for(let n in initialState){//for each grouping of initialized Elements\nlet element=initialState[n];let selector=element.selector;let selected=Array.from(document.querySelectorAll(selector));//all elements selected\nconsole.log(selected);let start_styles=element.style.trim().split(/;\\s?/);for(let s of start_styles){//for each starting style of the elements\nif(!s)continue;let[style_prop,style_val]=s.split(/:\\s?/);style_prop=style_prop.toLowerCase();console.log(style_prop,style_val);for(let el of selected){//each selected element\nconsole.log(el);let is_svg=el instanceof SVGElement;//will also include <svg></svg>\nlet svgprops=['d','points','x','y','x1','y1','x2','y2','cx','cy','r','rx','ry','width','height','transform','stroke'];//not an exhaustive list of svg attributes that might be used\nif(style_prop==='stroke-dashoffset'&&is_svg){//stroke-dashoffset is a special case, but we only care about going none to line fully drawn\nconsole.log('stroke-dashoffset');let length=el.getTotalLength()+Number(el.getAttribute('stroke-width'));console.log(length);style_val=length;el.style.setProperty('stroke-dasharray',length+' '+length);}else if(style_prop==='pie'){//set pie reveal start\nthis.startPie(el.id);let angles=style_val.split(/\\s+/);this.specialAnimations[el.id].startAngle=Number(angles[0]);this.specialAnimations[el.id].endAngle=Number(angles[1]);console.log(el.id,angles[0],angles[1]);this.setPie(el.id);}//setting SVG attributes here\nif(is_svg&&el.tagName!=='svg'&&svgprops.includes(style_prop)){let original=\"\".concat(style_prop,\":\").concat(el.getAttribute(style_prop));//preserve original\nel.setAttribute(style_prop,style_val);if(!this.specialAnimations[el.id]){this.specialAnimations[el.id]={original:[original]};}else{this.specialAnimations[el.id].original.push(original);}console.log('specialAnimations',this.specialAnimations[el.id]);}else{el.style.setProperty(style_prop,style_val);}this.initializedElements.push(el);}}}}Animate(regionname){console.log('Animate!',regionname);let region=this.animatedRegions[regionname];if(!region)return;console.log(regionname,region);console.log(region.animationStep);if(region.animationStep>0){let prevstep=region.steps[region.animationStep-1];region.animationDelay+=this.cssTimeToMS(prevstep&&prevstep.duration||0)+(prevstep&&prevstep.offset?this.cssTimeToMS(prevstep.offset):0);}if(region.steps.length){let commands=region.steps[region.animationStep];console.log(commands);let elements=commands?commands.elements||[]:[];let duration=commands?this.cssTimeToMS(commands.duration):0;let timing=this.getTimingFunc(commands===null||commands===void 0?void 0:commands.timing);let stepoffset=commands&&commands.offset?this.cssTimeToMS(commands.offset):0;for(var n in elements){let styles=this.stylestringToObj(elements[n].style,true)||{};console.log(styles);let selector=elements[n].selector;let el=elements[n];let substeps=elements[n].substeps;console.log(selector);//animeJS\nif(!this.animatedElements[selector]){this.animatedElements[selector]=[];}let step={duration,offset:region.animationDelay+stepoffset,//absolute offset, kept here to be in the loop\neasing:timing};if(substeps){//substeps is for staggered delay animations\nstep.delay=(el,i,l)=>i*duration/substeps;step.duration=duration/substeps;}console.log(this.specialAnimations);if(styles['pie']){//pie, because it's a special animation\nconsole.log('pie!',el.selector);let pies=Array.from(document.querySelectorAll(el.selector));step.targets=[];pies.forEach((p,n)=>{let id=p.id;console.log(id,this.specialAnimations[id]);step.targets.push(this.specialAnimations[id]);});let angles=styles['pie'].split(' ');step.startAngle=Number(angles[0]);step.endAngle=Number(angles[1]);console.log('startAngle',step.startAngle,'endAngle',step.endAngle);step.update=()=>{//custom function for anime JS\nconsole.log('step.update',step.startAngle,step.endAngle);let pies=Array.from(document.querySelectorAll(el.selector));pies.forEach(p=>{let id=p.id;if(this.specialAnimations[id])this.setPie(id);});};delete styles['pie'];step=Object.assign(step,styles);console.log(step);this.animatedElements[selector].push(step);}for(let s in styles){console.log(styles[s]);if(styles[s]==='original'&&this.specialAnimations){//this was for things drawn by generated svg\nconsole.log('ORIGINAL SVG!');let selected=Array.from(document.querySelectorAll(elements[n].selector));selected.forEach((sel,n)=>{let id=sel.id;console.log(id);if(this.specialAnimations[id]&&this.specialAnimations[id].original){styles[s]=this.specialAnimations[id].original;}});}}console.log(styles);step=Object.assign(step,styles);this.animatedElements[selector].push(step);}region.animationStep++;console.log('step:',region.animationStep,'total steps:',region.steps.length);if(region.animationStep<region.steps.length){this.Animate(regionname);}else if(region.animationStep===region.steps.length){//prevent double animation\nthis.executeAnimationTimeline();}else{console.log('Not Animating step:',region.animationStep,'total steps:',region.steps.length);}}}//Do the actual anime.js stuff here\nexecuteAnimationTimeline(){//animeJS\nconsole.log('start anime timeline');let timeline=anime.timeline({complete:anim=>this.animationDone=true});console.log(this.animatedElements);for(let e in this.animatedElements){let selector_steps=this.animatedElements[e];console.log(selector_steps);for(let s in selector_steps){let step=selector_steps[s];if(!step.targets)step.targets=e;console.log(step,step.offset);try{timeline=timeline.add(step,step.offset);}catch(ex){console.log(ex.message);}}}console.log(timeline);}cssTimeToMS(time){if(time&&time.match(/s$/)){//seconds\nreturn parseFloat(time)*1000;}else{return parseInt(time);}}getTimingFunc(timing){if(!timing){return'linear';}else{timing=this.toCamelCase(timing);switch(timing){case'ease':case'easeInOut':timing='easeInOutCubic';break;case'easeIn':timing='easeInCubic';break;case'easeOut':timing='easeOutCubic';break;default:}}return timing;}stylestringToObj(styles,camelCase){let obj={};if(typeof styles=='string'){let rules=styles.trim().split(/;\\s?/);for(var r in rules){let rule=rules[r];if(rule){let parts=rule.split(/\\s?:\\s?/);console.log(parts);let prop=parts[0].trim();if(camelCase)prop=this.toCamelCase(prop);if(parts.length===2)obj[prop]=parts[1].trim();}}styles=obj;}return styles;}toCamelCase(str){return str.replace(/-([a-z])/g,g=>g[1].toUpperCase());}//clear the style properties from elements\nclearStyles(){console.log('clearStyles animatedElements',this.animatedElements);for(let sel in this.animatedElements){let elements=Array.from(document.querySelectorAll(sel));for(let el of elements){console.log('clearing',el);el.removeAttribute('style');}}this.animatedElements={};console.log('clearStyles initializedElements',this.initializedElements);for(let el of this.initializedElements){el.removeAttribute('style');}console.log('clearStyles specialAnimations',this.specialAnimations);//restore originals svg attributes\nfor(let id in this.specialAnimations){let el=document.getElementById(id);if(this.specialAnimations[id]&&this.specialAnimations[id].original){for(let s of this.specialAnimations[id].original){let[attr,val]=s.split(':');el.setAttribute(attr,val);}}}this.specialAnimations={};}//setup for the \"pie\" animation\nstartPie(id){console.log('starting pie');let element=document.getElementById(id);if(element){let dims;let is_svg=element instanceof SVGElement&&element.tagName!=='svg';if(is_svg){console.log('svg element');if(element.querySelector('clipPath')){dims=element.querySelector('clipPath').getBBox();//TODO the parameter {stroke:true} whenever most browsers except parameters fro getBBox\n}else{dims=element.getBBox();}}else{console.log('not svg element');dims=element.getBoundingClientRect();}console.log('Dimensions',dims);let width=dims.width;let height=dims.height;if(is_svg&&element.getAttribute('stroke-width')){//because stroke-width throws off the real dimensions\nwidth+=Number(element.getAttribute('stroke-width'))*3;height+=Number(element.getAttribute('stroke-width'))*3;}console.log('Width',width,'Height',height);let center={x:width/2,y:height/2};let radius=Math.sqrt(Math.pow(center.x,2)+Math.pow(center.y,2));if(!this.specialAnimations[id])this.specialAnimations[id]={};console.log(center,radius);this.specialAnimations[id].center=center;this.specialAnimations[id].radius=radius;this.specialAnimations[id].startAngle=0;this.specialAnimations[id].endAngle=0;console.log('specialAnimations',id,this.specialAnimations);//arc\nlet path=this.drawPie(center.x,center.y,radius,0,0);//element.style.clipPath = `path('${path}')`;\nelement.style.setProperty('clip-path',\"path('\".concat(path,\"')\"));console.log(element);}}//sets the values for the pie animation clip-path\nsetPie(id){//console.log('setPie');\nlet center=this.specialAnimations[id].center;let radius=this.specialAnimations[id].radius;let start=this.specialAnimations[id].startAngle;let end=this.specialAnimations[id].endAngle;//console.log(id, start, end);\ntry{let path=this.drawPie(center.x,center.y,radius,start,end);document.getElementById(id).style.setProperty('clip-path',\"path('\".concat(path,\"')\"));}catch(ex){console.log(ex.message);}}//gets the values for the path properties for \"pie\" animation\ndrawPie(x,y,radius,startAngle,endAngle){var arc=this.arcValues(x,y,radius,startAngle,endAngle);var d=[\"M\",x,y,\"L\",arc.start.x,arc.start.y,\"A\",radius,radius,0,arc.largeArcFlag,1,arc.start2.x,arc.start2.y,\"A\",radius,radius,0,arc.largeArcFlag,1,arc.end.x,arc.end.y,\"Z\"].join(\" \");//console.log(startAngle, endAngle, d);\nreturn d;}//does the calculation for an arc path in \"pie\" animation\narcValues(x,y,radius,startAngle,endAngle){if(startAngle>endAngle){//switch if startAngle bigger than endAngle\nlet tempAngle=startAngle;startAngle=endAngle;endAngle=tempAngle;}if(startAngle>=360){let times=Math.floor(startAngle/360);startAngle-=times*360;endAngle-=times*360;}let arcAngle=endAngle-startAngle;if(arcAngle>360){let times=Math.floor(arcAngle/360);endAngle-=times*360;arcAngle-=times*360;}//half arcs needed because it won't draw 360\nvar start=this.polarToCartesian(x,y,radius,startAngle);var start2=this.polarToCartesian(x,y,radius,(endAngle+startAngle)/2);var end=this.polarToCartesian(x,y,radius,endAngle>360?endAngle-360:endAngle);var largeArcFlag=arcAngle/2<=180?\"0\":\"1\";return{start,start2,end,largeArcFlag};}//converts polar to cartesian\npolarToCartesian(centerX,centerY,radius,angleInDegrees){var angleInRadians=this.radians(angleInDegrees-90);return{x:centerX+radius*Math.cos(angleInRadians),y:centerY+radius*Math.sin(angleInRadians)};}//converts degree angles to radians\nradians(deg){return deg*Math.PI/180.0;}}","map":{"version":3,"names":["anime","Animation","constructor","animatedRegions","specialAnimations","observer","animatedElements","initializedElements","animationStep","animationDelay","animationDone","console","log","Prepare","animations","initialState","container","scrollarea","arguments","length","undefined","disconnect","forEach","r","start_obj","trigger","Object","assign","default","Start","target","document","querySelector","entries","Animate","keys","opt","root","threshold","Array","from","x","i","regions","IntersectionObserver","e","isIntersecting","find","n","el","triggered","intersectionRatio","selector","concat","_ref","k","val","entry","push","observe","clearStyles","element","selected","querySelectorAll","start_styles","style","trim","split","s","style_prop","style_val","toLowerCase","is_svg","SVGElement","svgprops","getTotalLength","Number","getAttribute","setProperty","startPie","id","angles","startAngle","endAngle","setPie","tagName","includes","original","setAttribute","regionname","region","prevstep","steps","cssTimeToMS","duration","offset","commands","elements","timing","getTimingFunc","stepoffset","styles","stylestringToObj","substeps","step","easing","delay","l","pies","targets","p","update","sel","executeAnimationTimeline","timeline","complete","anim","selector_steps","add","ex","message","time","match","parseFloat","parseInt","toCamelCase","camelCase","obj","rules","rule","parts","prop","str","replace","g","toUpperCase","removeAttribute","getElementById","attr","dims","getBBox","getBoundingClientRect","width","height","center","y","radius","Math","sqrt","pow","path","drawPie","start","end","arc","arcValues","d","largeArcFlag","start2","join","tempAngle","times","floor","arcAngle","polarToCartesian","centerX","centerY","angleInDegrees","angleInRadians","radians","cos","sin","deg","PI"],"sources":["C:/Users/Jason/projects/animation_queue/src/animation.js"],"sourcesContent":["import anime from 'animejs';\n\nexport default class Animation{\n\tanimatedRegions = {}; //scroll regions for animations\n\tspecialAnimations = {}; //collections of special animations: SVG attribute changes and the Pie Reveal animation\n\n\tobserver = null; //observer class for the scrolling triggers\n\n\tanimatedElements = {}; //elements (by selectors) and their scripted animations\n\tinitializedElements = []; //elements that were changed on Start\n\tanimationStep =  0; //current animation step number\n\tanimationDelay = 0; //culumative animation delay with each step\n\n\tanimationDone = false; //if the animation is done or not\n\n\n\tconstructor(){\n\t\tconsole.log('Animation class constructed');\n\t}\n\tasync Prepare(animations, initialState, container, scrollarea=null){\n\t\t//get regions\n\t\tif(this.observer != null){\n\t\t\tthis.observer.disconnect();\n\t\t}\n\t\tthis.animatedRegions = {};\n\t\tanimations.forEach(r=>{\n\t\t\tlet start_obj = {\n\t\t\t\tanimationStep:0,\n\t\t\t\tanimationDelay:0,\n\t\t\t};\n\n\t\t\tif (r.trigger){\n\t\t\t\tconsole.log(r);\n\t\t\t\tthis.animatedRegions[r.trigger] = Object.assign(start_obj, r);\n\t\t\t}else{\n\t\t\t\tthis.animatedRegions.default = Object.assign(start_obj, r);\n\t\t\t}\n\t\t});\n\n\t\tconsole.log('prepareAnimation!!');\n\t\tconsole.log(this.animatedRegions);\n\t\tawait this.Start(initialState);\n\n\t\tlet target = document.querySelector(scrollarea);\n\t\tconsole.log(target);\n\n\t\tconsole.log(this.animatedRegions.default!==null, Object.entries(this.animatedRegions).length===1);\n\t\tif (this.animatedRegions.default!==null && Object.entries(this.animatedRegions).length===1){\n\t\t\tconsole.log('default animation!');\n\t\t\tthis.Animate('default');\n\t\t}else{\n\t\t\tconsole.log('Not default', Object.keys(this.animatedRegions));\n\t\t\tlet opt = {\n\t\t\t\troot: document.querySelector(container),\n\t\t\t\tthreshold: Array.from({length:21},(x,i)=>i/20),\n\t\t\t};\n\t\t\tlet regions = [];\n\t\t\tthis.observer = new IntersectionObserver(\n\t\t\t\t(entries)=>{\n\t\t\t\t\tentries.forEach(e=>{\n\t\t\t\t\t\tif (e.isIntersecting){\n\t\t\t\t\t\t\tlet target = regions.find(n=>n.el === e.target);\n\n\t\t\t\t\t\t\tif (!target.triggered && e.intersectionRatio >= target.threshold){\n\t\t\t\t\t\t\t\tconsole.log('observer entry', e.intersectionRatio, target.selector, target.threshold);\n\n\t\t\t\t\t\t\t\tconsole.log(`${target.selector} threshold start animation!`);\n\t\t\t\t\t\t\t\tthis.Animate(target.selector);\n\t\t\t\t\t\t\t\ttarget.triggered = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t},\n\t\t\t\topt\n\t\t\t);\n\n\n\t\t\tObject.entries(this.animatedRegions).forEach(([k,val])=>{\n\t\t\t\tconsole.log(k, val);\n\t\t\t\tif (k !== 'default'){\n\t\t\t\t\tlet entry = document.querySelector(k);\n\t\t\t\t\tregions.push({\n\t\t\t\t\t\tel:entry,\n\t\t\t\t\t\tselector:k,\n\t\t\t\t\t\tthreshold:val.threshold,\n\t\t\t\t\t\ttriggered:false\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.observer.observe(entry);\n\t\t\t\t}\n\n\t\t\t});\n\t\t\tconsole.log(this.animatedRegions);\n\t\t\tconsole.log(regions);\n\n\t\t}\n\n\t}\n\tasync Start(initialState){\n\t\tthis.animationDone = false;\n\n\t\tthis.clearStyles(); //clear the styles and restart animatedElements\n\n\t\tconsole.log('Start!');\n\n\t\tconsole.log(initialState);\n\t\tfor (let n in initialState) { //for each grouping of initialized Elements\n\t\t\tlet element = initialState[n];\n\t\t\tlet selector = element.selector;\n\t\t\tlet selected = Array.from(document.querySelectorAll(selector)); //all elements selected\n\t\t\tconsole.log(selected);\n\n\t\t\tlet start_styles = element.style.trim().split(/;\\s?/);\n\t\t\tfor (let s of start_styles) { //for each starting style of the elements\n\t\t\t\tif (!s) continue;\n\t\t\t\tlet [style_prop, style_val] = s.split(/:\\s?/);\n\t\t\t\tstyle_prop = style_prop.toLowerCase();\n\t\t\t\tconsole.log(style_prop, style_val);\n\t\t\t\tfor (let el of selected) { //each selected element\n\t\t\t\t\tconsole.log(el);\n\n\t\t\t\t\tlet is_svg = el instanceof SVGElement; //will also include <svg></svg>\n\t\t\t\t\tlet svgprops = ['d', 'points', 'x', 'y', 'x1', 'y1', 'x2', 'y2', 'cx', 'cy', 'r', 'rx', 'ry', 'width', 'height','transform','stroke'];\n\t\t\t\t\t//not an exhaustive list of svg attributes that might be used\n\n\t\t\t\t\tif (style_prop === 'stroke-dashoffset' && is_svg) { //stroke-dashoffset is a special case, but we only care about going none to line fully drawn\n\t\t\t\t\t\tconsole.log('stroke-dashoffset');\n\t\t\t\t\t\tlet length = el.getTotalLength() + Number(el.getAttribute('stroke-width'));\n\t\t\t\t\t\tconsole.log(length);\n\t\t\t\t\t\tstyle_val = length;\n\t\t\t\t\t\tel.style.setProperty('stroke-dasharray', length + ' ' + length);\n\t\t\t\t\t} else if (style_prop === 'pie') { //set pie reveal start\n\t\t\t\t\t\tthis.startPie(el.id);\n\t\t\t\t\t\tlet angles = style_val.split(/\\s+/);\n\t\t\t\t\t\tthis.specialAnimations[el.id].startAngle = Number(angles[0]);\n\t\t\t\t\t\tthis.specialAnimations[el.id].endAngle = Number(angles[1]);\n\t\t\t\t\t\tconsole.log(el.id, angles[0], angles[1]);\n\t\t\t\t\t\tthis.setPie(el.id);\n\t\t\t\t\t}\n\t\t\t\t\t//setting SVG attributes here\n\t\t\t\t\tif (is_svg && el.tagName !== 'svg' && svgprops.includes(style_prop)) {\n\t\t\t\t\t\tlet original = `${style_prop}:${el.getAttribute(style_prop)}`; //preserve original\n\t\t\t\t\t\tel.setAttribute(style_prop, style_val);\n\t\t\t\t\t\tif (!this.specialAnimations[el.id]){\n\t\t\t\t\t\t\tthis.specialAnimations[el.id] = {original:[original]};\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.specialAnimations[el.id].original.push(original);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsole.log('specialAnimations', this.specialAnimations[el.id]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.style.setProperty(style_prop, style_val);\n\t\t\t\t\t}\n\t\t\t\t\tthis.initializedElements.push(el);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\tAnimate(regionname){\n\t\tconsole.log('Animate!', regionname);\n\t\tlet region = this.animatedRegions[regionname];\n\t\tif (!region) return;\n\t\tconsole.log(regionname, region);\n\t\tconsole.log(region.animationStep);\n\n\t\tif (region.animationStep > 0) {\n\t\t\tlet prevstep = region.steps[region.animationStep - 1];\n\t\t\tregion.animationDelay += this.cssTimeToMS((prevstep && prevstep.duration) || 0) + (prevstep && prevstep.offset ? this.cssTimeToMS(prevstep.offset) : 0);\n\t\t}\n\n\t\tif (region.steps.length) {\n\t\t\tlet commands = region.steps[region.animationStep];\n\t\t\tconsole.log(commands);\n\t\t\tlet elements = commands ? (commands.elements || []) : [];\n\t\t\tlet duration = commands ? this.cssTimeToMS(commands.duration) : 0;\n\t\t\tlet timing = this.getTimingFunc(commands?.timing);\n\n\t\t\tlet stepoffset = commands && commands.offset ? this.cssTimeToMS(commands.offset) : 0;\n\n\t\t\tfor (var n in elements) {\n\t\t\t\tlet styles = this.stylestringToObj(elements[n].style, true) || {};\n\t\t\t\tconsole.log(styles);\n\t\t\t\tlet selector = elements[n].selector;\n\t\t\t\tlet el = elements[n];\n\t\t\t\tlet substeps = elements[n].substeps;\n\t\t\t\tconsole.log(selector);\n\n\t\t\t\t//animeJS\n\t\t\t\tif (!this.animatedElements[selector]) {\n\t\t\t\t\tthis.animatedElements[selector] = [];\n\t\t\t\t}\n\t\t\t\tlet step = {\n\t\t\t\t\tduration,\n\t\t\t\t\toffset: region.animationDelay + stepoffset, //absolute offset, kept here to be in the loop\n\t\t\t\t\teasing: timing,\n\t\t\t\t};\n\n\t\t\t\tif (substeps) { //substeps is for staggered delay animations\n\t\t\t\t\tstep.delay = (el, i, l) => i * duration / substeps;\n\t\t\t\t\tstep.duration = duration / substeps;\n\t\t\t\t}\n\n\t\t\t\tconsole.log(this.specialAnimations);\n\t\t\t\tif (styles['pie']) { //pie, because it's a special animation\n\t\t\t\t\tconsole.log('pie!', el.selector);\n\t\t\t\t\tlet pies = Array.from(document.querySelectorAll(el.selector));\n\t\t\t\t\tstep.targets = [];\n\t\t\t\t\tpies.forEach((p, n) => {\n\t\t\t\t\t\tlet id = p.id;\n\t\t\t\t\t\tconsole.log(id, this.specialAnimations[id]);\n\t\t\t\t\t\tstep.targets.push(this.specialAnimations[id]);\n\t\t\t\t\t});\n\t\t\t\t\tlet angles = styles['pie'].split(' ');\n\t\t\t\t\tstep.startAngle = Number(angles[0]);\n\t\t\t\t\tstep.endAngle = Number(angles[1]);\n\t\t\t\t\tconsole.log('startAngle', step.startAngle, 'endAngle', step.endAngle);\n\t\t\t\t\tstep.update = () => { //custom function for anime JS\n\t\t\t\t\t\tconsole.log('step.update', step.startAngle, step.endAngle);\n\t\t\t\t\t\tlet pies = Array.from(document.querySelectorAll(el.selector));\n\t\t\t\t\t\tpies.forEach((p) => {\n\t\t\t\t\t\t\tlet id = p.id;\n\t\t\t\t\t\t\tif (this.specialAnimations[id]) this.setPie(id);\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tdelete styles['pie'];\n\t\t\t\t\tstep = Object.assign(step, styles);\n\t\t\t\t\tconsole.log(step);\n\t\t\t\t\tthis.animatedElements[selector].push(step);\n\t\t\t\t}\n\t\t\t\tfor (let s in styles) {\n\t\t\t\t\tconsole.log(styles[s]);\n\t\t\t\t\tif (styles[s] === 'original' && this.specialAnimations) { //this was for things drawn by generated svg\n\t\t\t\t\t\tconsole.log('ORIGINAL SVG!');\n\t\t\t\t\t\tlet selected = Array.from(document.querySelectorAll(elements[n].selector));\n\t\t\t\t\t\tselected.forEach((sel, n) => {\n\t\t\t\t\t\t\tlet id = sel.id;\n\t\t\t\t\t\t\tconsole.log(id);\n\t\t\t\t\t\t\tif (this.specialAnimations[id] && this.specialAnimations[id].original) {\n\t\t\t\t\t\t\t\tstyles[s] = this.specialAnimations[id].original;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconsole.log(styles);\n\t\t\t\tstep = Object.assign(step, styles);\n\t\t\t\tthis.animatedElements[selector].push(step);\n\t\t\t}\n\t\t\tregion.animationStep++;\n\t\t\tconsole.log('step:', region.animationStep, 'total steps:', region.steps.length);\n\t\t\tif (region.animationStep < region.steps.length) {\n\t\t\t\tthis.Animate(regionname);\n\t\t\t} else if (region.animationStep === region.steps.length) { //prevent double animation\n\t\t\t\tthis.executeAnimationTimeline();\n\t\t\t} else {\n\t\t\t\tconsole.log('Not Animating step:', region.animationStep, 'total steps:', region.steps.length);\n\t\t\t}\n\t\t}\n\t}\n\t//Do the actual anime.js stuff here\n\texecuteAnimationTimeline(){\n\t\t//animeJS\n\t\tconsole.log('start anime timeline');\n\t\tlet timeline = anime.timeline({ complete: (anim) => this.animationDone = true });\n\n\t\tconsole.log(this.animatedElements);\n\t\tfor (let e in this.animatedElements) {\n\t\t\tlet selector_steps = this.animatedElements[e];\n\t\t\tconsole.log(selector_steps);\n\t\t\tfor (let s in selector_steps) {\n\t\t\t\tlet step = selector_steps[s];\n\t\t\t\tif (!step.targets) step.targets = e;\n\t\t\t\tconsole.log(step, step.offset);\n\t\t\t\ttry {\n\t\t\t\t\ttimeline = timeline.add(step, step.offset);\n\t\t\t\t} catch (ex) {\n\t\t\t\t\tconsole.log(ex.message);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconsole.log(timeline);\n\t}\n\tcssTimeToMS(time){\n\t\tif (time && time.match(/s$/)) { //seconds\n\t\t\treturn parseFloat(time) * 1000;\n\t\t} else {\n\t\t\treturn parseInt(time);\n\t\t}\n\t}\n\tgetTimingFunc(timing){\n\t\tif(!timing){\n\t\t\treturn 'linear';\n\t\t} else {\n\t\t\ttiming = this.toCamelCase(timing);\n\t\t\tswitch(timing){\n\t\t\t\tcase 'ease':\n\t\t\t\tcase 'easeInOut':\n\t\t\t\t\ttiming = 'easeInOutCubic';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'easeIn':\n\t\t\t\t\ttiming = 'easeInCubic';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'easeOut':\n\t\t\t\t\ttiming = 'easeOutCubic';\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t}\n\t\t}\n\t\treturn timing;\n\t}\n\tstylestringToObj(styles, camelCase){\n\t\tlet obj = {};\n\t\tif (typeof styles == 'string'){\n\t\t\tlet rules = styles.trim().split(/;\\s?/);\n\t\t\tfor(var r in rules){\n\t\t\t\tlet rule = rules[r];\n\t\t\t\tif (rule){\n\t\t\t\t\tlet parts = rule.split(/\\s?:\\s?/);\n\t\t\t\t\tconsole.log(parts);\n\t\t\t\t\tlet prop = parts[0].trim();\n\t\t\t\t\tif (camelCase) prop = this.toCamelCase(prop);\n\t\t\t\t\tif (parts.length === 2) obj[prop] = parts[1].trim();\n\t\t\t\t}\n\t\t\t}\n\t\t\tstyles = obj;\n\t\t}\n\t\treturn styles;\n\t}\n\ttoCamelCase(str){\n\t\treturn str.replace(/-([a-z])/g, g => g[1].toUpperCase());\n\t}\n\t//clear the style properties from elements\n\tclearStyles(){\n\t\tconsole.log('clearStyles animatedElements', this.animatedElements);\n\t\tfor(let sel in this.animatedElements){\n\t\t\tlet elements = Array.from(document.querySelectorAll(sel));\n\t\t\tfor(let el of elements){\n\t\t\t\tconsole.log('clearing', el);\n\t\t\t\tel.removeAttribute('style');\n\t\t\t}\n\t\t}\n\t\tthis.animatedElements = {};\n\n\t\tconsole.log('clearStyles initializedElements', this.initializedElements);\n\t\tfor (let el of this.initializedElements) {\n\t\t\tel.removeAttribute('style');\n\t\t}\n\n\t\tconsole.log('clearStyles specialAnimations', this.specialAnimations);\n\t\t//restore originals svg attributes\n\t\tfor(let id in this.specialAnimations){\n\t\t\tlet el = document.getElementById(id);\n\t\t\tif (this.specialAnimations[id] && this.specialAnimations[id].original){\n\t\t\t\tfor(let s of this.specialAnimations[id].original){\n\t\t\t\t\tlet [attr, val] = s.split(':');\n\t\t\t\t\tel.setAttribute(attr, val);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.specialAnimations = {};\n\t}\n\t//setup for the \"pie\" animation\n\tstartPie(id){\n\t\tconsole.log('starting pie');\n\t\tlet element = document.getElementById(id);\n\t\tif (element) {\n\t\t\tlet  dims;\n\t\t\tlet is_svg = element instanceof SVGElement && element.tagName!=='svg';\n\t\t\tif (is_svg) {\n\t\t\t\tconsole.log('svg element');\n\t\t\t\tif (element.querySelector('clipPath')) {\n\t\t\t\t\tdims = element.querySelector('clipPath').getBBox();\n\t\t\t\t\t//TODO the parameter {stroke:true} whenever most browsers except parameters fro getBBox\n\t\t\t\t} else {\n\t\t\t\t\tdims = element.getBBox();\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tconsole.log('not svg element');\n\t\t\t\tdims = element.getBoundingClientRect();\n\t\t\t}\n\n\t\t\tconsole.log('Dimensions', dims);\n\t\t\tlet width = dims.width;\n\t\t\tlet height = dims.height;\n\t\t\tif (is_svg && element.getAttribute('stroke-width')){ //because stroke-width throws off the real dimensions\n\t\t\t\twidth += Number(element.getAttribute('stroke-width'))*3;\n\t\t\t\theight += Number(element.getAttribute('stroke-width'))*3;\n\t\t\t}\n\t\t\tconsole.log('Width', width, 'Height',height);\n\t\t\tlet center = { x: width / 2, y: height / 2 };\n\t\t\tlet radius = Math.sqrt(Math.pow(center.x, 2) + Math.pow(center.y, 2));\n\n\n\t\t\tif (!this.specialAnimations[id]) this.specialAnimations[id] = {};\n\t\t\tconsole.log(center, radius);\n\t\t\tthis.specialAnimations[id].center = center;\n\t\t\tthis.specialAnimations[id].radius = radius;\n\t\t\tthis.specialAnimations[id].startAngle = 0;\n\t\t\tthis.specialAnimations[id].endAngle = 0;\n\t\t\tconsole.log('specialAnimations', id, this.specialAnimations);\n\t\t\t//arc\n\t\t\tlet path = this.drawPie(center.x, center.y, radius, 0, 0);\n\t\t\t//element.style.clipPath = `path('${path}')`;\n\t\t\telement.style.setProperty('clip-path', `path('${path}')`);\n\t\t\tconsole.log(element);\n\t\t}\n\t}\n\t//sets the values for the pie animation clip-path\n\tsetPie(id){\n\t\t//console.log('setPie');\n\t\tlet center = this.specialAnimations[id].center;\n\t\tlet radius = this.specialAnimations[id].radius;\n\t\tlet start = this.specialAnimations[id].startAngle;\n\t\tlet end = this.specialAnimations[id].endAngle;\n\t\t//console.log(id, start, end);\n\t\ttry {\n\t\t\tlet path = this.drawPie(center.x, center.y, radius, start, end);\n\t\t\tdocument.getElementById(id).style.setProperty('clip-path',`path('${path}')`);\n\t\t} catch (ex) {\n\t\t\tconsole.log(ex.message);\n\t\t}\n\t}\n\t//gets the values for the path properties for \"pie\" animation\n\tdrawPie(x, y, radius, startAngle, endAngle){\n\t\tvar arc = this.arcValues(x, y, radius, startAngle, endAngle);\n\n\t\tvar d = [\n\t\t\t\"M\", x, y,\n\t\t\t\"L\", arc.start.x, arc.start.y,\n\t\t\t\"A\", radius, radius, 0, arc.largeArcFlag, 1, arc.start2.x, arc.start2.y,\n\t\t\t\"A\", radius, radius, 0, arc.largeArcFlag, 1, arc.end.x, arc.end.y,\n\t\t\t\"Z\"\n\t\t].join(\" \");\n\t\t//console.log(startAngle, endAngle, d);\n\t\treturn d;\n\t}\n\t//does the calculation for an arc path in \"pie\" animation\n\tarcValues(x, y, radius, startAngle, endAngle){\n        if (startAngle > endAngle){ //switch if startAngle bigger than endAngle\n            let tempAngle = startAngle;\n            startAngle = endAngle;\n            endAngle = tempAngle;\n        }\n        if (startAngle >= 360){\n            let times = Math.floor(startAngle/360);\n            startAngle -= times*360;\n            endAngle -= times*360;\n        }\n        let arcAngle = endAngle - startAngle;\n        if (arcAngle > 360){\n            let times = Math.floor(arcAngle/360);\n            endAngle -= times*360;\n            arcAngle -= times*360;\n        }\n\n        //half arcs needed because it won't draw 360\n        var start = this.polarToCartesian(x, y, radius, startAngle);\n        var start2 = this.polarToCartesian(x, y, radius, (endAngle+startAngle)/2);\n        var end = this.polarToCartesian(x, y, radius, endAngle > 360 ? endAngle-360 : endAngle);\n\n        var largeArcFlag = arcAngle/2 <= 180 ? \"0\" : \"1\";\n        return {start, start2, end, largeArcFlag};\n    }\n\t//converts polar to cartesian\n\tpolarToCartesian(centerX, centerY, radius, angleInDegrees) {\n        var angleInRadians = this.radians(angleInDegrees-90);\n\n        return {\n          x: centerX + (radius * Math.cos(angleInRadians)),\n          y: centerY + (radius * Math.sin(angleInRadians))\n        };\n    }\n\t//converts degree angles to radians\n\tradians(deg){\n        return deg * Math.PI / 180.0;\n    }\n\n}\n\n\n\n\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,SAAS,CAE3B,cAAe,MAAM,CAAAC,SAAS,CAWN;AAGvBC,WAAWA,CAAA,CAAE,MAbbC,eAAe,CAAG,CAAC,CAAC,CAAE;AAAA,KACtBC,iBAAiB,CAAG,CAAC,CAAC,CAAE;AAAA,KAExBC,QAAQ,CAAG,IAAI,CAAE;AAAA,KAEjBC,gBAAgB,CAAG,CAAC,CAAC,CAAE;AAAA,KACvBC,mBAAmB,CAAG,EAAE,CAAE;AAAA,KAC1BC,aAAa,CAAI,CAAC,CAAE;AAAA,KACpBC,cAAc,CAAG,CAAC,CAAE;AAAA,KAEpBC,aAAa,CAAG,KAAK,CAIpBC,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC,CAC3C,CACA,KAAM,CAAAC,OAAOA,CAACC,UAAU,CAAEC,YAAY,CAAEC,SAAS,CAAkB,IAAhB,CAAAC,UAAU,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAC,IAAI,CACjE;AACA,GAAG,IAAI,CAACb,QAAQ,EAAI,IAAI,CAAC,CACxB,IAAI,CAACA,QAAQ,CAACgB,UAAU,CAAC,CAAC,CAC3B,CACA,IAAI,CAAClB,eAAe,CAAG,CAAC,CAAC,CACzBW,UAAU,CAACQ,OAAO,CAACC,CAAC,EAAE,CACrB,GAAI,CAAAC,SAAS,CAAG,CACfhB,aAAa,CAAC,CAAC,CACfC,cAAc,CAAC,CAChB,CAAC,CAED,GAAIc,CAAC,CAACE,OAAO,CAAC,CACbd,OAAO,CAACC,GAAG,CAACW,CAAC,CAAC,CACd,IAAI,CAACpB,eAAe,CAACoB,CAAC,CAACE,OAAO,CAAC,CAAGC,MAAM,CAACC,MAAM,CAACH,SAAS,CAAED,CAAC,CAAC,CAC9D,CAAC,IAAI,CACJ,IAAI,CAACpB,eAAe,CAACyB,OAAO,CAAGF,MAAM,CAACC,MAAM,CAACH,SAAS,CAAED,CAAC,CAAC,CAC3D,CACD,CAAC,CAAC,CAEFZ,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CACjCD,OAAO,CAACC,GAAG,CAAC,IAAI,CAACT,eAAe,CAAC,CACjC,KAAM,KAAI,CAAC0B,KAAK,CAACd,YAAY,CAAC,CAE9B,GAAI,CAAAe,MAAM,CAAGC,QAAQ,CAACC,aAAa,CAACf,UAAU,CAAC,CAC/CN,OAAO,CAACC,GAAG,CAACkB,MAAM,CAAC,CAEnBnB,OAAO,CAACC,GAAG,CAAC,IAAI,CAACT,eAAe,CAACyB,OAAO,GAAG,IAAI,CAAEF,MAAM,CAACO,OAAO,CAAC,IAAI,CAAC9B,eAAe,CAAC,CAACgB,MAAM,GAAG,CAAC,CAAC,CACjG,GAAI,IAAI,CAAChB,eAAe,CAACyB,OAAO,GAAG,IAAI,EAAIF,MAAM,CAACO,OAAO,CAAC,IAAI,CAAC9B,eAAe,CAAC,CAACgB,MAAM,GAAG,CAAC,CAAC,CAC1FR,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CACjC,IAAI,CAACsB,OAAO,CAAC,SAAS,CAAC,CACxB,CAAC,IAAI,CACJvB,OAAO,CAACC,GAAG,CAAC,aAAa,CAAEc,MAAM,CAACS,IAAI,CAAC,IAAI,CAAChC,eAAe,CAAC,CAAC,CAC7D,GAAI,CAAAiC,GAAG,CAAG,CACTC,IAAI,CAAEN,QAAQ,CAACC,aAAa,CAAChB,SAAS,CAAC,CACvCsB,SAAS,CAAEC,KAAK,CAACC,IAAI,CAAC,CAACrB,MAAM,CAAC,EAAE,CAAC,CAAC,CAACsB,CAAC,CAACC,CAAC,GAAGA,CAAC,CAAC,EAAE,CAC9C,CAAC,CACD,GAAI,CAAAC,OAAO,CAAG,EAAE,CAChB,IAAI,CAACtC,QAAQ,CAAG,GAAI,CAAAuC,oBAAoB,CACtCX,OAAO,EAAG,CACVA,OAAO,CAACX,OAAO,CAACuB,CAAC,EAAE,CAClB,GAAIA,CAAC,CAACC,cAAc,CAAC,CACpB,GAAI,CAAAhB,MAAM,CAAGa,OAAO,CAACI,IAAI,CAACC,CAAC,EAAEA,CAAC,CAACC,EAAE,GAAKJ,CAAC,CAACf,MAAM,CAAC,CAE/C,GAAI,CAACA,MAAM,CAACoB,SAAS,EAAIL,CAAC,CAACM,iBAAiB,EAAIrB,MAAM,CAACQ,SAAS,CAAC,CAChE3B,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEiC,CAAC,CAACM,iBAAiB,CAAErB,MAAM,CAACsB,QAAQ,CAAEtB,MAAM,CAACQ,SAAS,CAAC,CAErF3B,OAAO,CAACC,GAAG,IAAAyC,MAAA,CAAIvB,MAAM,CAACsB,QAAQ,+BAA6B,CAAC,CAC5D,IAAI,CAAClB,OAAO,CAACJ,MAAM,CAACsB,QAAQ,CAAC,CAC7BtB,MAAM,CAACoB,SAAS,CAAG,IAAI,CACxB,CACD,CACD,CAAC,CAAC,CAEH,CAAC,CACDd,GACD,CAAC,CAGDV,MAAM,CAACO,OAAO,CAAC,IAAI,CAAC9B,eAAe,CAAC,CAACmB,OAAO,CAACgC,IAAA,EAAW,IAAV,CAACC,CAAC,CAACC,GAAG,CAAC,CAAAF,IAAA,CACpD3C,OAAO,CAACC,GAAG,CAAC2C,CAAC,CAAEC,GAAG,CAAC,CACnB,GAAID,CAAC,GAAK,SAAS,CAAC,CACnB,GAAI,CAAAE,KAAK,CAAG1B,QAAQ,CAACC,aAAa,CAACuB,CAAC,CAAC,CACrCZ,OAAO,CAACe,IAAI,CAAC,CACZT,EAAE,CAACQ,KAAK,CACRL,QAAQ,CAACG,CAAC,CACVjB,SAAS,CAACkB,GAAG,CAAClB,SAAS,CACvBY,SAAS,CAAC,KACX,CAAC,CAAC,CAEF,IAAI,CAAC7C,QAAQ,CAACsD,OAAO,CAACF,KAAK,CAAC,CAC7B,CAED,CAAC,CAAC,CACF9C,OAAO,CAACC,GAAG,CAAC,IAAI,CAACT,eAAe,CAAC,CACjCQ,OAAO,CAACC,GAAG,CAAC+B,OAAO,CAAC,CAErB,CAED,CACA,KAAM,CAAAd,KAAKA,CAACd,YAAY,CAAC,CACxB,IAAI,CAACL,aAAa,CAAG,KAAK,CAE1B,IAAI,CAACkD,WAAW,CAAC,CAAC,CAAE;AAEpBjD,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC,CAErBD,OAAO,CAACC,GAAG,CAACG,YAAY,CAAC,CACzB,IAAK,GAAI,CAAAiC,CAAC,GAAI,CAAAjC,YAAY,CAAE,CAAE;AAC7B,GAAI,CAAA8C,OAAO,CAAG9C,YAAY,CAACiC,CAAC,CAAC,CAC7B,GAAI,CAAAI,QAAQ,CAAGS,OAAO,CAACT,QAAQ,CAC/B,GAAI,CAAAU,QAAQ,CAAGvB,KAAK,CAACC,IAAI,CAACT,QAAQ,CAACgC,gBAAgB,CAACX,QAAQ,CAAC,CAAC,CAAE;AAChEzC,OAAO,CAACC,GAAG,CAACkD,QAAQ,CAAC,CAErB,GAAI,CAAAE,YAAY,CAAGH,OAAO,CAACI,KAAK,CAACC,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,CAAC,CACrD,IAAK,GAAI,CAAAC,CAAC,GAAI,CAAAJ,YAAY,CAAE,CAAE;AAC7B,GAAI,CAACI,CAAC,CAAE,SACR,GAAI,CAACC,UAAU,CAAEC,SAAS,CAAC,CAAGF,CAAC,CAACD,KAAK,CAAC,MAAM,CAAC,CAC7CE,UAAU,CAAGA,UAAU,CAACE,WAAW,CAAC,CAAC,CACrC5D,OAAO,CAACC,GAAG,CAACyD,UAAU,CAAEC,SAAS,CAAC,CAClC,IAAK,GAAI,CAAArB,EAAE,GAAI,CAAAa,QAAQ,CAAE,CAAE;AAC1BnD,OAAO,CAACC,GAAG,CAACqC,EAAE,CAAC,CAEf,GAAI,CAAAuB,MAAM,CAAGvB,EAAE,WAAY,CAAAwB,UAAU,CAAE;AACvC,GAAI,CAAAC,QAAQ,CAAG,CAAC,GAAG,CAAE,QAAQ,CAAE,GAAG,CAAE,GAAG,CAAE,IAAI,CAAE,IAAI,CAAE,IAAI,CAAE,IAAI,CAAE,IAAI,CAAE,IAAI,CAAE,GAAG,CAAE,IAAI,CAAE,IAAI,CAAE,OAAO,CAAE,QAAQ,CAAC,WAAW,CAAC,QAAQ,CAAC,CACrI;AAEA,GAAIL,UAAU,GAAK,mBAAmB,EAAIG,MAAM,CAAE,CAAE;AACnD7D,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC,CAChC,GAAI,CAAAO,MAAM,CAAG8B,EAAE,CAAC0B,cAAc,CAAC,CAAC,CAAGC,MAAM,CAAC3B,EAAE,CAAC4B,YAAY,CAAC,cAAc,CAAC,CAAC,CAC1ElE,OAAO,CAACC,GAAG,CAACO,MAAM,CAAC,CACnBmD,SAAS,CAAGnD,MAAM,CAClB8B,EAAE,CAACgB,KAAK,CAACa,WAAW,CAAC,kBAAkB,CAAE3D,MAAM,CAAG,GAAG,CAAGA,MAAM,CAAC,CAChE,CAAC,IAAM,IAAIkD,UAAU,GAAK,KAAK,CAAE,CAAE;AAClC,IAAI,CAACU,QAAQ,CAAC9B,EAAE,CAAC+B,EAAE,CAAC,CACpB,GAAI,CAAAC,MAAM,CAAGX,SAAS,CAACH,KAAK,CAAC,KAAK,CAAC,CACnC,IAAI,CAAC/D,iBAAiB,CAAC6C,EAAE,CAAC+B,EAAE,CAAC,CAACE,UAAU,CAAGN,MAAM,CAACK,MAAM,CAAC,CAAC,CAAC,CAAC,CAC5D,IAAI,CAAC7E,iBAAiB,CAAC6C,EAAE,CAAC+B,EAAE,CAAC,CAACG,QAAQ,CAAGP,MAAM,CAACK,MAAM,CAAC,CAAC,CAAC,CAAC,CAC1DtE,OAAO,CAACC,GAAG,CAACqC,EAAE,CAAC+B,EAAE,CAAEC,MAAM,CAAC,CAAC,CAAC,CAAEA,MAAM,CAAC,CAAC,CAAC,CAAC,CACxC,IAAI,CAACG,MAAM,CAACnC,EAAE,CAAC+B,EAAE,CAAC,CACnB,CACA;AACA,GAAIR,MAAM,EAAIvB,EAAE,CAACoC,OAAO,GAAK,KAAK,EAAIX,QAAQ,CAACY,QAAQ,CAACjB,UAAU,CAAC,CAAE,CACpE,GAAI,CAAAkB,QAAQ,IAAAlC,MAAA,CAAMgB,UAAU,MAAAhB,MAAA,CAAIJ,EAAE,CAAC4B,YAAY,CAACR,UAAU,CAAC,CAAE,CAAE;AAC/DpB,EAAE,CAACuC,YAAY,CAACnB,UAAU,CAAEC,SAAS,CAAC,CACtC,GAAI,CAAC,IAAI,CAAClE,iBAAiB,CAAC6C,EAAE,CAAC+B,EAAE,CAAC,CAAC,CAClC,IAAI,CAAC5E,iBAAiB,CAAC6C,EAAE,CAAC+B,EAAE,CAAC,CAAG,CAACO,QAAQ,CAAC,CAACA,QAAQ,CAAC,CAAC,CACtD,CAAC,IAAI,CACJ,IAAI,CAACnF,iBAAiB,CAAC6C,EAAE,CAAC+B,EAAE,CAAC,CAACO,QAAQ,CAAC7B,IAAI,CAAC6B,QAAQ,CAAC,CACtD,CACA5E,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAE,IAAI,CAACR,iBAAiB,CAAC6C,EAAE,CAAC+B,EAAE,CAAC,CAAC,CAChE,CAAC,IAAM,CACN/B,EAAE,CAACgB,KAAK,CAACa,WAAW,CAACT,UAAU,CAAEC,SAAS,CAAC,CAC5C,CACA,IAAI,CAAC/D,mBAAmB,CAACmD,IAAI,CAACT,EAAE,CAAC,CAClC,CACD,CACD,CAED,CACAf,OAAOA,CAACuD,UAAU,CAAC,CAClB9E,OAAO,CAACC,GAAG,CAAC,UAAU,CAAE6E,UAAU,CAAC,CACnC,GAAI,CAAAC,MAAM,CAAG,IAAI,CAACvF,eAAe,CAACsF,UAAU,CAAC,CAC7C,GAAI,CAACC,MAAM,CAAE,OACb/E,OAAO,CAACC,GAAG,CAAC6E,UAAU,CAAEC,MAAM,CAAC,CAC/B/E,OAAO,CAACC,GAAG,CAAC8E,MAAM,CAAClF,aAAa,CAAC,CAEjC,GAAIkF,MAAM,CAAClF,aAAa,CAAG,CAAC,CAAE,CAC7B,GAAI,CAAAmF,QAAQ,CAAGD,MAAM,CAACE,KAAK,CAACF,MAAM,CAAClF,aAAa,CAAG,CAAC,CAAC,CACrDkF,MAAM,CAACjF,cAAc,EAAI,IAAI,CAACoF,WAAW,CAAEF,QAAQ,EAAIA,QAAQ,CAACG,QAAQ,EAAK,CAAC,CAAC,EAAIH,QAAQ,EAAIA,QAAQ,CAACI,MAAM,CAAG,IAAI,CAACF,WAAW,CAACF,QAAQ,CAACI,MAAM,CAAC,CAAG,CAAC,CAAC,CACxJ,CAEA,GAAIL,MAAM,CAACE,KAAK,CAACzE,MAAM,CAAE,CACxB,GAAI,CAAA6E,QAAQ,CAAGN,MAAM,CAACE,KAAK,CAACF,MAAM,CAAClF,aAAa,CAAC,CACjDG,OAAO,CAACC,GAAG,CAACoF,QAAQ,CAAC,CACrB,GAAI,CAAAC,QAAQ,CAAGD,QAAQ,CAAIA,QAAQ,CAACC,QAAQ,EAAI,EAAE,CAAI,EAAE,CACxD,GAAI,CAAAH,QAAQ,CAAGE,QAAQ,CAAG,IAAI,CAACH,WAAW,CAACG,QAAQ,CAACF,QAAQ,CAAC,CAAG,CAAC,CACjE,GAAI,CAAAI,MAAM,CAAG,IAAI,CAACC,aAAa,CAACH,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEE,MAAM,CAAC,CAEjD,GAAI,CAAAE,UAAU,CAAGJ,QAAQ,EAAIA,QAAQ,CAACD,MAAM,CAAG,IAAI,CAACF,WAAW,CAACG,QAAQ,CAACD,MAAM,CAAC,CAAG,CAAC,CAEpF,IAAK,GAAI,CAAA/C,CAAC,GAAI,CAAAiD,QAAQ,CAAE,CACvB,GAAI,CAAAI,MAAM,CAAG,IAAI,CAACC,gBAAgB,CAACL,QAAQ,CAACjD,CAAC,CAAC,CAACiB,KAAK,CAAE,IAAI,CAAC,EAAI,CAAC,CAAC,CACjEtD,OAAO,CAACC,GAAG,CAACyF,MAAM,CAAC,CACnB,GAAI,CAAAjD,QAAQ,CAAG6C,QAAQ,CAACjD,CAAC,CAAC,CAACI,QAAQ,CACnC,GAAI,CAAAH,EAAE,CAAGgD,QAAQ,CAACjD,CAAC,CAAC,CACpB,GAAI,CAAAuD,QAAQ,CAAGN,QAAQ,CAACjD,CAAC,CAAC,CAACuD,QAAQ,CACnC5F,OAAO,CAACC,GAAG,CAACwC,QAAQ,CAAC,CAErB;AACA,GAAI,CAAC,IAAI,CAAC9C,gBAAgB,CAAC8C,QAAQ,CAAC,CAAE,CACrC,IAAI,CAAC9C,gBAAgB,CAAC8C,QAAQ,CAAC,CAAG,EAAE,CACrC,CACA,GAAI,CAAAoD,IAAI,CAAG,CACVV,QAAQ,CACRC,MAAM,CAAEL,MAAM,CAACjF,cAAc,CAAG2F,UAAU,CAAE;AAC5CK,MAAM,CAAEP,MACT,CAAC,CAED,GAAIK,QAAQ,CAAE,CAAE;AACfC,IAAI,CAACE,KAAK,CAAG,CAACzD,EAAE,CAAEP,CAAC,CAAEiE,CAAC,GAAKjE,CAAC,CAAGoD,QAAQ,CAAGS,QAAQ,CAClDC,IAAI,CAACV,QAAQ,CAAGA,QAAQ,CAAGS,QAAQ,CACpC,CAEA5F,OAAO,CAACC,GAAG,CAAC,IAAI,CAACR,iBAAiB,CAAC,CACnC,GAAIiG,MAAM,CAAC,KAAK,CAAC,CAAE,CAAE;AACpB1F,OAAO,CAACC,GAAG,CAAC,MAAM,CAAEqC,EAAE,CAACG,QAAQ,CAAC,CAChC,GAAI,CAAAwD,IAAI,CAAGrE,KAAK,CAACC,IAAI,CAACT,QAAQ,CAACgC,gBAAgB,CAACd,EAAE,CAACG,QAAQ,CAAC,CAAC,CAC7DoD,IAAI,CAACK,OAAO,CAAG,EAAE,CACjBD,IAAI,CAACtF,OAAO,CAAC,CAACwF,CAAC,CAAE9D,CAAC,GAAK,CACtB,GAAI,CAAAgC,EAAE,CAAG8B,CAAC,CAAC9B,EAAE,CACbrE,OAAO,CAACC,GAAG,CAACoE,EAAE,CAAE,IAAI,CAAC5E,iBAAiB,CAAC4E,EAAE,CAAC,CAAC,CAC3CwB,IAAI,CAACK,OAAO,CAACnD,IAAI,CAAC,IAAI,CAACtD,iBAAiB,CAAC4E,EAAE,CAAC,CAAC,CAC9C,CAAC,CAAC,CACF,GAAI,CAAAC,MAAM,CAAGoB,MAAM,CAAC,KAAK,CAAC,CAAClC,KAAK,CAAC,GAAG,CAAC,CACrCqC,IAAI,CAACtB,UAAU,CAAGN,MAAM,CAACK,MAAM,CAAC,CAAC,CAAC,CAAC,CACnCuB,IAAI,CAACrB,QAAQ,CAAGP,MAAM,CAACK,MAAM,CAAC,CAAC,CAAC,CAAC,CACjCtE,OAAO,CAACC,GAAG,CAAC,YAAY,CAAE4F,IAAI,CAACtB,UAAU,CAAE,UAAU,CAAEsB,IAAI,CAACrB,QAAQ,CAAC,CACrEqB,IAAI,CAACO,MAAM,CAAG,IAAM,CAAE;AACrBpG,OAAO,CAACC,GAAG,CAAC,aAAa,CAAE4F,IAAI,CAACtB,UAAU,CAAEsB,IAAI,CAACrB,QAAQ,CAAC,CAC1D,GAAI,CAAAyB,IAAI,CAAGrE,KAAK,CAACC,IAAI,CAACT,QAAQ,CAACgC,gBAAgB,CAACd,EAAE,CAACG,QAAQ,CAAC,CAAC,CAC7DwD,IAAI,CAACtF,OAAO,CAAEwF,CAAC,EAAK,CACnB,GAAI,CAAA9B,EAAE,CAAG8B,CAAC,CAAC9B,EAAE,CACb,GAAI,IAAI,CAAC5E,iBAAiB,CAAC4E,EAAE,CAAC,CAAE,IAAI,CAACI,MAAM,CAACJ,EAAE,CAAC,CAChD,CAAC,CAAC,CACH,CAAC,CACD,MAAO,CAAAqB,MAAM,CAAC,KAAK,CAAC,CACpBG,IAAI,CAAG9E,MAAM,CAACC,MAAM,CAAC6E,IAAI,CAAEH,MAAM,CAAC,CAClC1F,OAAO,CAACC,GAAG,CAAC4F,IAAI,CAAC,CACjB,IAAI,CAAClG,gBAAgB,CAAC8C,QAAQ,CAAC,CAACM,IAAI,CAAC8C,IAAI,CAAC,CAC3C,CACA,IAAK,GAAI,CAAApC,CAAC,GAAI,CAAAiC,MAAM,CAAE,CACrB1F,OAAO,CAACC,GAAG,CAACyF,MAAM,CAACjC,CAAC,CAAC,CAAC,CACtB,GAAIiC,MAAM,CAACjC,CAAC,CAAC,GAAK,UAAU,EAAI,IAAI,CAAChE,iBAAiB,CAAE,CAAE;AACzDO,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,CAC5B,GAAI,CAAAkD,QAAQ,CAAGvB,KAAK,CAACC,IAAI,CAACT,QAAQ,CAACgC,gBAAgB,CAACkC,QAAQ,CAACjD,CAAC,CAAC,CAACI,QAAQ,CAAC,CAAC,CAC1EU,QAAQ,CAACxC,OAAO,CAAC,CAAC0F,GAAG,CAAEhE,CAAC,GAAK,CAC5B,GAAI,CAAAgC,EAAE,CAAGgC,GAAG,CAAChC,EAAE,CACfrE,OAAO,CAACC,GAAG,CAACoE,EAAE,CAAC,CACf,GAAI,IAAI,CAAC5E,iBAAiB,CAAC4E,EAAE,CAAC,EAAI,IAAI,CAAC5E,iBAAiB,CAAC4E,EAAE,CAAC,CAACO,QAAQ,CAAE,CACtEc,MAAM,CAACjC,CAAC,CAAC,CAAG,IAAI,CAAChE,iBAAiB,CAAC4E,EAAE,CAAC,CAACO,QAAQ,CAChD,CACD,CAAC,CAAC,CACH,CACD,CACA5E,OAAO,CAACC,GAAG,CAACyF,MAAM,CAAC,CACnBG,IAAI,CAAG9E,MAAM,CAACC,MAAM,CAAC6E,IAAI,CAAEH,MAAM,CAAC,CAClC,IAAI,CAAC/F,gBAAgB,CAAC8C,QAAQ,CAAC,CAACM,IAAI,CAAC8C,IAAI,CAAC,CAC3C,CACAd,MAAM,CAAClF,aAAa,EAAE,CACtBG,OAAO,CAACC,GAAG,CAAC,OAAO,CAAE8E,MAAM,CAAClF,aAAa,CAAE,cAAc,CAAEkF,MAAM,CAACE,KAAK,CAACzE,MAAM,CAAC,CAC/E,GAAIuE,MAAM,CAAClF,aAAa,CAAGkF,MAAM,CAACE,KAAK,CAACzE,MAAM,CAAE,CAC/C,IAAI,CAACe,OAAO,CAACuD,UAAU,CAAC,CACzB,CAAC,IAAM,IAAIC,MAAM,CAAClF,aAAa,GAAKkF,MAAM,CAACE,KAAK,CAACzE,MAAM,CAAE,CAAE;AAC1D,IAAI,CAAC8F,wBAAwB,CAAC,CAAC,CAChC,CAAC,IAAM,CACNtG,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAE8E,MAAM,CAAClF,aAAa,CAAE,cAAc,CAAEkF,MAAM,CAACE,KAAK,CAACzE,MAAM,CAAC,CAC9F,CACD,CACD,CACA;AACA8F,wBAAwBA,CAAA,CAAE,CACzB;AACAtG,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC,CACnC,GAAI,CAAAsG,QAAQ,CAAGlH,KAAK,CAACkH,QAAQ,CAAC,CAAEC,QAAQ,CAAGC,IAAI,EAAK,IAAI,CAAC1G,aAAa,CAAG,IAAK,CAAC,CAAC,CAEhFC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACN,gBAAgB,CAAC,CAClC,IAAK,GAAI,CAAAuC,CAAC,GAAI,KAAI,CAACvC,gBAAgB,CAAE,CACpC,GAAI,CAAA+G,cAAc,CAAG,IAAI,CAAC/G,gBAAgB,CAACuC,CAAC,CAAC,CAC7ClC,OAAO,CAACC,GAAG,CAACyG,cAAc,CAAC,CAC3B,IAAK,GAAI,CAAAjD,CAAC,GAAI,CAAAiD,cAAc,CAAE,CAC7B,GAAI,CAAAb,IAAI,CAAGa,cAAc,CAACjD,CAAC,CAAC,CAC5B,GAAI,CAACoC,IAAI,CAACK,OAAO,CAAEL,IAAI,CAACK,OAAO,CAAGhE,CAAC,CACnClC,OAAO,CAACC,GAAG,CAAC4F,IAAI,CAAEA,IAAI,CAACT,MAAM,CAAC,CAC9B,GAAI,CACHmB,QAAQ,CAAGA,QAAQ,CAACI,GAAG,CAACd,IAAI,CAAEA,IAAI,CAACT,MAAM,CAAC,CAC3C,CAAE,MAAOwB,EAAE,CAAE,CACZ5G,OAAO,CAACC,GAAG,CAAC2G,EAAE,CAACC,OAAO,CAAC,CACxB,CACD,CACD,CACA7G,OAAO,CAACC,GAAG,CAACsG,QAAQ,CAAC,CACtB,CACArB,WAAWA,CAAC4B,IAAI,CAAC,CAChB,GAAIA,IAAI,EAAIA,IAAI,CAACC,KAAK,CAAC,IAAI,CAAC,CAAE,CAAE;AAC/B,MAAO,CAAAC,UAAU,CAACF,IAAI,CAAC,CAAG,IAAI,CAC/B,CAAC,IAAM,CACN,MAAO,CAAAG,QAAQ,CAACH,IAAI,CAAC,CACtB,CACD,CACAtB,aAAaA,CAACD,MAAM,CAAC,CACpB,GAAG,CAACA,MAAM,CAAC,CACV,MAAO,QAAQ,CAChB,CAAC,IAAM,CACNA,MAAM,CAAG,IAAI,CAAC2B,WAAW,CAAC3B,MAAM,CAAC,CACjC,OAAOA,MAAM,EACZ,IAAK,MAAM,CACX,IAAK,WAAW,CACfA,MAAM,CAAG,gBAAgB,CACzB,MACD,IAAK,QAAQ,CACZA,MAAM,CAAG,aAAa,CACtB,MACD,IAAK,SAAS,CACbA,MAAM,CAAG,cAAc,CACvB,MACD,QACD,CACD,CACA,MAAO,CAAAA,MAAM,CACd,CACAI,gBAAgBA,CAACD,MAAM,CAAEyB,SAAS,CAAC,CAClC,GAAI,CAAAC,GAAG,CAAG,CAAC,CAAC,CACZ,GAAI,MAAO,CAAA1B,MAAM,EAAI,QAAQ,CAAC,CAC7B,GAAI,CAAA2B,KAAK,CAAG3B,MAAM,CAACnC,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,CAAC,CACvC,IAAI,GAAI,CAAA5C,CAAC,GAAI,CAAAyG,KAAK,CAAC,CAClB,GAAI,CAAAC,IAAI,CAAGD,KAAK,CAACzG,CAAC,CAAC,CACnB,GAAI0G,IAAI,CAAC,CACR,GAAI,CAAAC,KAAK,CAAGD,IAAI,CAAC9D,KAAK,CAAC,SAAS,CAAC,CACjCxD,OAAO,CAACC,GAAG,CAACsH,KAAK,CAAC,CAClB,GAAI,CAAAC,IAAI,CAAGD,KAAK,CAAC,CAAC,CAAC,CAAChE,IAAI,CAAC,CAAC,CAC1B,GAAI4D,SAAS,CAAEK,IAAI,CAAG,IAAI,CAACN,WAAW,CAACM,IAAI,CAAC,CAC5C,GAAID,KAAK,CAAC/G,MAAM,GAAK,CAAC,CAAE4G,GAAG,CAACI,IAAI,CAAC,CAAGD,KAAK,CAAC,CAAC,CAAC,CAAChE,IAAI,CAAC,CAAC,CACpD,CACD,CACAmC,MAAM,CAAG0B,GAAG,CACb,CACA,MAAO,CAAA1B,MAAM,CACd,CACAwB,WAAWA,CAACO,GAAG,CAAC,CACf,MAAO,CAAAA,GAAG,CAACC,OAAO,CAAC,WAAW,CAAEC,CAAC,EAAIA,CAAC,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAC,CACzD,CACA;AACA3E,WAAWA,CAAA,CAAE,CACZjD,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAE,IAAI,CAACN,gBAAgB,CAAC,CAClE,IAAI,GAAI,CAAA0G,GAAG,GAAI,KAAI,CAAC1G,gBAAgB,CAAC,CACpC,GAAI,CAAA2F,QAAQ,CAAG1D,KAAK,CAACC,IAAI,CAACT,QAAQ,CAACgC,gBAAgB,CAACiD,GAAG,CAAC,CAAC,CACzD,IAAI,GAAI,CAAA/D,EAAE,GAAI,CAAAgD,QAAQ,CAAC,CACtBtF,OAAO,CAACC,GAAG,CAAC,UAAU,CAAEqC,EAAE,CAAC,CAC3BA,EAAE,CAACuF,eAAe,CAAC,OAAO,CAAC,CAC5B,CACD,CACA,IAAI,CAAClI,gBAAgB,CAAG,CAAC,CAAC,CAE1BK,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAE,IAAI,CAACL,mBAAmB,CAAC,CACxE,IAAK,GAAI,CAAA0C,EAAE,GAAI,KAAI,CAAC1C,mBAAmB,CAAE,CACxC0C,EAAE,CAACuF,eAAe,CAAC,OAAO,CAAC,CAC5B,CAEA7H,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAE,IAAI,CAACR,iBAAiB,CAAC,CACpE;AACA,IAAI,GAAI,CAAA4E,EAAE,GAAI,KAAI,CAAC5E,iBAAiB,CAAC,CACpC,GAAI,CAAA6C,EAAE,CAAGlB,QAAQ,CAAC0G,cAAc,CAACzD,EAAE,CAAC,CACpC,GAAI,IAAI,CAAC5E,iBAAiB,CAAC4E,EAAE,CAAC,EAAI,IAAI,CAAC5E,iBAAiB,CAAC4E,EAAE,CAAC,CAACO,QAAQ,CAAC,CACrE,IAAI,GAAI,CAAAnB,CAAC,GAAI,KAAI,CAAChE,iBAAiB,CAAC4E,EAAE,CAAC,CAACO,QAAQ,CAAC,CAChD,GAAI,CAACmD,IAAI,CAAElF,GAAG,CAAC,CAAGY,CAAC,CAACD,KAAK,CAAC,GAAG,CAAC,CAC9BlB,EAAE,CAACuC,YAAY,CAACkD,IAAI,CAAElF,GAAG,CAAC,CAC3B,CACD,CACD,CACA,IAAI,CAACpD,iBAAiB,CAAG,CAAC,CAAC,CAC5B,CACA;AACA2E,QAAQA,CAACC,EAAE,CAAC,CACXrE,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC,CAC3B,GAAI,CAAAiD,OAAO,CAAG9B,QAAQ,CAAC0G,cAAc,CAACzD,EAAE,CAAC,CACzC,GAAInB,OAAO,CAAE,CACZ,GAAK,CAAA8E,IAAI,CACT,GAAI,CAAAnE,MAAM,CAAGX,OAAO,WAAY,CAAAY,UAAU,EAAIZ,OAAO,CAACwB,OAAO,GAAG,KAAK,CACrE,GAAIb,MAAM,CAAE,CACX7D,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC,CAC1B,GAAIiD,OAAO,CAAC7B,aAAa,CAAC,UAAU,CAAC,CAAE,CACtC2G,IAAI,CAAG9E,OAAO,CAAC7B,aAAa,CAAC,UAAU,CAAC,CAAC4G,OAAO,CAAC,CAAC,CAClD;AACD,CAAC,IAAM,CACND,IAAI,CAAG9E,OAAO,CAAC+E,OAAO,CAAC,CAAC,CACzB,CAED,CAAC,IAAM,CACNjI,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC,CAC9B+H,IAAI,CAAG9E,OAAO,CAACgF,qBAAqB,CAAC,CAAC,CACvC,CAEAlI,OAAO,CAACC,GAAG,CAAC,YAAY,CAAE+H,IAAI,CAAC,CAC/B,GAAI,CAAAG,KAAK,CAAGH,IAAI,CAACG,KAAK,CACtB,GAAI,CAAAC,MAAM,CAAGJ,IAAI,CAACI,MAAM,CACxB,GAAIvE,MAAM,EAAIX,OAAO,CAACgB,YAAY,CAAC,cAAc,CAAC,CAAC,CAAE;AACpDiE,KAAK,EAAIlE,MAAM,CAACf,OAAO,CAACgB,YAAY,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CACvDkE,MAAM,EAAInE,MAAM,CAACf,OAAO,CAACgB,YAAY,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CACzD,CACAlE,OAAO,CAACC,GAAG,CAAC,OAAO,CAAEkI,KAAK,CAAE,QAAQ,CAACC,MAAM,CAAC,CAC5C,GAAI,CAAAC,MAAM,CAAG,CAAEvG,CAAC,CAAEqG,KAAK,CAAG,CAAC,CAAEG,CAAC,CAAEF,MAAM,CAAG,CAAE,CAAC,CAC5C,GAAI,CAAAG,MAAM,CAAGC,IAAI,CAACC,IAAI,CAACD,IAAI,CAACE,GAAG,CAACL,MAAM,CAACvG,CAAC,CAAE,CAAC,CAAC,CAAG0G,IAAI,CAACE,GAAG,CAACL,MAAM,CAACC,CAAC,CAAE,CAAC,CAAC,CAAC,CAGrE,GAAI,CAAC,IAAI,CAAC7I,iBAAiB,CAAC4E,EAAE,CAAC,CAAE,IAAI,CAAC5E,iBAAiB,CAAC4E,EAAE,CAAC,CAAG,CAAC,CAAC,CAChErE,OAAO,CAACC,GAAG,CAACoI,MAAM,CAAEE,MAAM,CAAC,CAC3B,IAAI,CAAC9I,iBAAiB,CAAC4E,EAAE,CAAC,CAACgE,MAAM,CAAGA,MAAM,CAC1C,IAAI,CAAC5I,iBAAiB,CAAC4E,EAAE,CAAC,CAACkE,MAAM,CAAGA,MAAM,CAC1C,IAAI,CAAC9I,iBAAiB,CAAC4E,EAAE,CAAC,CAACE,UAAU,CAAG,CAAC,CACzC,IAAI,CAAC9E,iBAAiB,CAAC4E,EAAE,CAAC,CAACG,QAAQ,CAAG,CAAC,CACvCxE,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAEoE,EAAE,CAAE,IAAI,CAAC5E,iBAAiB,CAAC,CAC5D;AACA,GAAI,CAAAkJ,IAAI,CAAG,IAAI,CAACC,OAAO,CAACP,MAAM,CAACvG,CAAC,CAAEuG,MAAM,CAACC,CAAC,CAAEC,MAAM,CAAE,CAAC,CAAE,CAAC,CAAC,CACzD;AACArF,OAAO,CAACI,KAAK,CAACa,WAAW,CAAC,WAAW,UAAAzB,MAAA,CAAWiG,IAAI,MAAI,CAAC,CACzD3I,OAAO,CAACC,GAAG,CAACiD,OAAO,CAAC,CACrB,CACD,CACA;AACAuB,MAAMA,CAACJ,EAAE,CAAC,CACT;AACA,GAAI,CAAAgE,MAAM,CAAG,IAAI,CAAC5I,iBAAiB,CAAC4E,EAAE,CAAC,CAACgE,MAAM,CAC9C,GAAI,CAAAE,MAAM,CAAG,IAAI,CAAC9I,iBAAiB,CAAC4E,EAAE,CAAC,CAACkE,MAAM,CAC9C,GAAI,CAAAM,KAAK,CAAG,IAAI,CAACpJ,iBAAiB,CAAC4E,EAAE,CAAC,CAACE,UAAU,CACjD,GAAI,CAAAuE,GAAG,CAAG,IAAI,CAACrJ,iBAAiB,CAAC4E,EAAE,CAAC,CAACG,QAAQ,CAC7C;AACA,GAAI,CACH,GAAI,CAAAmE,IAAI,CAAG,IAAI,CAACC,OAAO,CAACP,MAAM,CAACvG,CAAC,CAAEuG,MAAM,CAACC,CAAC,CAAEC,MAAM,CAAEM,KAAK,CAAEC,GAAG,CAAC,CAC/D1H,QAAQ,CAAC0G,cAAc,CAACzD,EAAE,CAAC,CAACf,KAAK,CAACa,WAAW,CAAC,WAAW,UAAAzB,MAAA,CAAUiG,IAAI,MAAI,CAAC,CAC7E,CAAE,MAAO/B,EAAE,CAAE,CACZ5G,OAAO,CAACC,GAAG,CAAC2G,EAAE,CAACC,OAAO,CAAC,CACxB,CACD,CACA;AACA+B,OAAOA,CAAC9G,CAAC,CAAEwG,CAAC,CAAEC,MAAM,CAAEhE,UAAU,CAAEC,QAAQ,CAAC,CAC1C,GAAI,CAAAuE,GAAG,CAAG,IAAI,CAACC,SAAS,CAAClH,CAAC,CAAEwG,CAAC,CAAEC,MAAM,CAAEhE,UAAU,CAAEC,QAAQ,CAAC,CAE5D,GAAI,CAAAyE,CAAC,CAAG,CACP,GAAG,CAAEnH,CAAC,CAAEwG,CAAC,CACT,GAAG,CAAES,GAAG,CAACF,KAAK,CAAC/G,CAAC,CAAEiH,GAAG,CAACF,KAAK,CAACP,CAAC,CAC7B,GAAG,CAAEC,MAAM,CAAEA,MAAM,CAAE,CAAC,CAAEQ,GAAG,CAACG,YAAY,CAAE,CAAC,CAAEH,GAAG,CAACI,MAAM,CAACrH,CAAC,CAAEiH,GAAG,CAACI,MAAM,CAACb,CAAC,CACvE,GAAG,CAAEC,MAAM,CAAEA,MAAM,CAAE,CAAC,CAAEQ,GAAG,CAACG,YAAY,CAAE,CAAC,CAAEH,GAAG,CAACD,GAAG,CAAChH,CAAC,CAAEiH,GAAG,CAACD,GAAG,CAACR,CAAC,CACjE,GAAG,CACH,CAACc,IAAI,CAAC,GAAG,CAAC,CACX;AACA,MAAO,CAAAH,CAAC,CACT,CACA;AACAD,SAASA,CAAClH,CAAC,CAAEwG,CAAC,CAAEC,MAAM,CAAEhE,UAAU,CAAEC,QAAQ,CAAC,CACtC,GAAID,UAAU,CAAGC,QAAQ,CAAC,CAAE;AACxB,GAAI,CAAA6E,SAAS,CAAG9E,UAAU,CAC1BA,UAAU,CAAGC,QAAQ,CACrBA,QAAQ,CAAG6E,SAAS,CACxB,CACA,GAAI9E,UAAU,EAAI,GAAG,CAAC,CAClB,GAAI,CAAA+E,KAAK,CAAGd,IAAI,CAACe,KAAK,CAAChF,UAAU,CAAC,GAAG,CAAC,CACtCA,UAAU,EAAI+E,KAAK,CAAC,GAAG,CACvB9E,QAAQ,EAAI8E,KAAK,CAAC,GAAG,CACzB,CACA,GAAI,CAAAE,QAAQ,CAAGhF,QAAQ,CAAGD,UAAU,CACpC,GAAIiF,QAAQ,CAAG,GAAG,CAAC,CACf,GAAI,CAAAF,KAAK,CAAGd,IAAI,CAACe,KAAK,CAACC,QAAQ,CAAC,GAAG,CAAC,CACpChF,QAAQ,EAAI8E,KAAK,CAAC,GAAG,CACrBE,QAAQ,EAAIF,KAAK,CAAC,GAAG,CACzB,CAEA;AACA,GAAI,CAAAT,KAAK,CAAG,IAAI,CAACY,gBAAgB,CAAC3H,CAAC,CAAEwG,CAAC,CAAEC,MAAM,CAAEhE,UAAU,CAAC,CAC3D,GAAI,CAAA4E,MAAM,CAAG,IAAI,CAACM,gBAAgB,CAAC3H,CAAC,CAAEwG,CAAC,CAAEC,MAAM,CAAE,CAAC/D,QAAQ,CAACD,UAAU,EAAE,CAAC,CAAC,CACzE,GAAI,CAAAuE,GAAG,CAAG,IAAI,CAACW,gBAAgB,CAAC3H,CAAC,CAAEwG,CAAC,CAAEC,MAAM,CAAE/D,QAAQ,CAAG,GAAG,CAAGA,QAAQ,CAAC,GAAG,CAAGA,QAAQ,CAAC,CAEvF,GAAI,CAAA0E,YAAY,CAAGM,QAAQ,CAAC,CAAC,EAAI,GAAG,CAAG,GAAG,CAAG,GAAG,CAChD,MAAO,CAACX,KAAK,CAAEM,MAAM,CAAEL,GAAG,CAAEI,YAAY,CAAC,CAC7C,CACH;AACAO,gBAAgBA,CAACC,OAAO,CAAEC,OAAO,CAAEpB,MAAM,CAAEqB,cAAc,CAAE,CACpD,GAAI,CAAAC,cAAc,CAAG,IAAI,CAACC,OAAO,CAACF,cAAc,CAAC,EAAE,CAAC,CAEpD,MAAO,CACL9H,CAAC,CAAE4H,OAAO,CAAInB,MAAM,CAAGC,IAAI,CAACuB,GAAG,CAACF,cAAc,CAAE,CAChDvB,CAAC,CAAEqB,OAAO,CAAIpB,MAAM,CAAGC,IAAI,CAACwB,GAAG,CAACH,cAAc,CAChD,CAAC,CACL,CACH;AACAC,OAAOA,CAACG,GAAG,CAAC,CACL,MAAO,CAAAA,GAAG,CAAGzB,IAAI,CAAC0B,EAAE,CAAG,KAAK,CAChC,CAEJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}